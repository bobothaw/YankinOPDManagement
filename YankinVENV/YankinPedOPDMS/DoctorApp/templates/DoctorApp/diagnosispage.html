{% extends "common/base.html" %}

{% block navbar %}
{% include "DoctorApp/doctornav.html" %}
{% endblock navbar %}

{% block content %}
<form method="post" action="{% block form_action %}{% endblock %}" id="diagform">
    {% csrf_token %}
    <div class="card">
      <div class=" p-3 text-primary text-center bg-light card-title">
          {% block headerText %}Diagnosis page for {{waitingPatient.patient.patient_name}} {% endblock headerText %} 
      </div>
      <div class="card-body">
      <h5 class="card-title">Patient Name: {{waitingPatient.patient.patient_name}}</h5>
      
        <p class="card-text">
            Temperature: {{waitingPatient.temperature}}Â°F
        </p>
        <p class="card-text">
            Body Weight:  {{waitingPatient.weight}} Kg
        </p>
        <p class="card-text">
            Systolic/Diastolic: {{waitingPatient.systole}}/{{waitingPatient.diastole}} mHg
        </p>
        <div class="mb-3">
            <label class="form-label" for="chcon">Chief Conplaint</label>
            <input type="text" placeholder="Chief Conplaint of the patient" id="chcon" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label" for="secon">Secondary Conplaint</label>
            <input type="text" placeholder="Secondary Conplaint of the patient" id="seccon" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label" for="phyfind">Physical Findings</label>
            <input type="text" placeholder="Input any physical findings Conplaint" id="phyfind" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label" for="testresult">Test Results</label>
            <input type="text" placeholder="Input test results if there are any" id="testresult" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label" for="pridiag">Primary Diagnosis</label>
            <select name="primaryDiag" id="pridiag" required>
                <option value="">Select a suitable diagnosis</option>
                {% for diagitem in diaglist %}
                    <option value="{{diagitem.id}}">{{diagitem.diagnosis_name}}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label" for="secdiag">Secondary Diagnosis</label>
            <select name="secondaryDiag" id="secdiag" required>
                <option value="">Select a suitable diagnosis</option>
                {% for diagitem in diaglist %}
                    <option value="{{diagitem.id}}">{{diagitem.diagnosis_name}}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="admitCheck" name = "QueueCheck" value = "True">
            <label class="form-check-label" for="admitCheck">Admit the patient</label>
        </div>
        <div class="mb-3" id="wardDiv">
            <label for="ward" class="form-label">Ward</label>
            <select name="ward" id="ward" required>
                <option value="">Select a ward</option>
                {% for ward in wards %}
                    <option value="{{ward.id}}">{{ward.ward_name}}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="col-12 btn btn-primary">
            {% block btnText %}Diagnose{% endblock btnText %}  
        </button>
      </div>
  </div>
    
</form>
<script>
    $(document).ready(function() {
        var form = $('#diagform');
        var checkbox = $('#admitCheck');
        var chShipBlock = $('#wardDiv');

        chShipBlock.hide();

        checkbox.on('click', function() {
            if ($(this).is(':checked')) {
                chShipBlock.show();
                chShipBlock.find('input').prop('required', true);
            } 
            else {
                chShipBlock.hide();
                chShipBlock.find('input').prop('required', false);
            }
        });
    });
</script>
{% endblock content %}
